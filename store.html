<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Ù…ØªØ¬Ø± Ø§Ù„Ø³Ø§Ø¹Ø§Øª</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            direction: rtl;
            background: #f4f4f4;
        }
        header {
            background: #000;
            color: #fff;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }
        header h1 { margin: 0; }
        .header-buttons {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .header-buttons button {
            background: #fff;
            color: #000;
            border: none;
            padding: 8px 15px;
            cursor: pointer;
            border-radius: 5px;
            font-weight: bold;
        }
        .welcome { padding: 10px 20px; background: #ddd; text-align: center; font-size: 18px; }
        .products {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            padding: 30px;
        }
        .product {
            background: #fff;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .product img { width: 100%; height: 150px; object-fit: cover; border-radius: 10px; }
        .product h3 { margin: 10px 0; }
        .product p { margin: 5px 0; font-weight: bold; }
        .product button { padding: 5px 10px; background: #000; color: #fff; border: none; border-radius:5px; cursor:pointer; }
        
        /* Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª Sidebar */
        #cartSidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100%;
            background: #fff;
            box-shadow: -5px 0 15px rgba(0,0,0,0.3);
            transition: 0.3s;
            padding: 20px;
            overflow-y: auto;
            z-index: 1000;
        }
        #cartSidebar.open { right: 0; }
        #cartSidebar h3 { margin-top:0; }
        #cartSidebar .closeBtn {
            background: #000;
            color:#fff;
            border:none;
            padding:5px 10px;
            cursor:pointer;
            border-radius:5px;
            margin-bottom:10px;
        }

        /* Checkout */
        input, select, textarea { width:100%; padding:8px; margin:5px 0; border-radius:5px; border:1px solid #ccc; }
        #checkoutBtn, #submitReviewBtn { width:100%; padding:10px; margin-top:10px; background:#000; color:#fff; border:none; border-radius:5px; cursor:pointer; }
        #checkoutBtn:hover, #submitReviewBtn:hover { background:#444; }

        /* ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… */
        #reviews, #userReview { margin:20px; display:none; background:#fff; padding:20px; border-radius:10px; }
        .review { border-top:1px solid #ccc; padding:5px 0; }

    </style>
</head>
<body>

<header>
    <h1>Ù…ØªØ¬Ø± Ø§Ù„Ø³Ø§Ø¹Ø§Øª</h1>
    <div class="header-buttons">
        <button onclick="toggleCart()">ğŸ›’ Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª (<span id="cartCount">0</span>)</button>
        <button onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
    </div>
</header>

<div class="welcome" id="welcomeMsg"></div>

<div class="products" id="products"></div>

<!-- Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª Sidebar -->
<div id="cartSidebar">
    <button class="closeBtn" onclick="toggleCart()">Ø¥ØºÙ„Ø§Ù‚</button>
    <h3>Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</h3>
    <div id="cartItems">Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</div>

    <!-- Ø²Ø± Ø¥Ø¸Ù‡Ø§Ø± Checkout -->
    <button onclick="showCheckout()" style="margin-top:10px; background:#444; color:#fff;">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡</button>

    <!-- Checkout Ù…Ø®ÙÙŠ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ -->
    <div id="checkoutForm" style="display:none; margin-top:10px;">
        <h3>Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡</h3>
        <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„:</label><input type="text" id="fullName" required>
        <label>Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„:</label><input type="email" id="email" required>
        <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</label><input type="text" id="phone" required>
        <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</label><textarea id="address" rows="2" required></textarea>
        <label>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:</label>
        <select id="paymentMethod" required>
            <option value="">Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</option>
            <option value="ÙƒØ§Ø±Øª Ø¨Ù†ÙƒÙŠ">ÙƒØ§Ø±Øª Ø¨Ù†ÙƒÙŠ</option>
            <option value="ÙÙˆØ±ÙŠ">ÙÙˆØ±ÙŠ</option>
            <option value="Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…">Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</option>
        </select>
        <button id="checkoutBtn">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹</button>
    </div>
</div>

<!-- Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… -->
<div id="userReview">
    <h3>Ø£Ø¶Ù ØªÙ‚ÙŠÙŠÙ…Ùƒ</h3>
    <label>Ø§Ø®ØªØ± Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ø¬ÙˆÙ…:</label>
    <select id="starRating">
        <option value="1">â­</option>
        <option value="2">â­â­</option>
        <option value="3">â­â­â­</option>
        <option value="4">â­â­â­â­</option>
        <option value="5" selected>â­â­â­â­â­</option>
    </select>
    <label>ØªØ¹Ù„ÙŠÙ‚Ùƒ Ø¹Ù† Ø§Ù„Ø®Ø¯Ù…Ø©:</label>
    <textarea id="userComment" rows="3" placeholder="Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ùƒ..." required></textarea>
    <button id="submitReviewBtn">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</button>
</div>

<div id="reviews">
    <h3>Ø¢Ø±Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h3>
</div>

<script>
const account = JSON.parse(localStorage.getItem('account'));
if(!account) { window.location.href="index.html"; }
document.getElementById('welcomeMsg').innerText = `Ø£Ù‡Ù„Ø§ ${account.name} ğŸ‘‹`;

// Ø¨ÙŠØ§Ù†Ø§Øª 20 Ø³Ø§Ø¹Ø© Ø¨Ø£Ø³Ù…Ø§Ø¡ Ø¬Ø°Ø§Ø¨Ø© Ù…Ù† Ù…Ø¬Ù„Ø¯ images
let products = [
    {name:"Ø±ÙˆÙŠØ§Ù„ ÙƒØ±ÙˆÙ†", price: Math.floor(Math.random()*500)+100, img:"images/1.jpg"},
    {name:"Ù…Ø§Ø¬Ø³ØªÙŠÙƒ", price: Math.floor(Math.random()*500)+100, img:"images/2.jpg"},
    {name:"Ø£ÙˆÙ…ÙŠØºØ§ Ø³ØªØ§ÙŠÙ„", price: Math.floor(Math.random()*500)+100, img:"images/3.jpg"},
    {name:"Ù„Ø§ÙŠØª Ù†ÙˆÙØ§", price: Math.floor(Math.random()*500)+100, img:"images/4.jpg"},
    {name:"Ø£ØªÙ„Ø§Ù†ØªÙŠÙƒ", price: Math.floor(Math.random()*500)+100, img:"images/5.jpg"},
    {name:"ÙÙŠØ±ØªÙˆÙƒØ³", price: Math.floor(Math.random()*500)+100, img:"images/6.jpg"},
    {name:"ÙƒÙ„Ø§Ø³ÙŠÙƒ ØªØ§ÙŠÙ…", price: Math.floor(Math.random()*500)+100, img:"images/7.jpg"},
    {name:"Ø¥Ù„ÙŠØºØ§Ù†Ø³", price: Math.floor(Math.random()*500)+100, img:"images/8.jpg"},
    {name:"Ù†ÙˆØ¨Ù„ ÙƒØ±Ø§ÙˆÙ†", price: Math.floor(Math.random()*500)+100, img:"images/9.jpg"},
    {name:"Ø³ØªÙŠÙ„ Ø³ØªØ§Ø±", price: Math.floor(Math.random()*500)+100, img:"images/10.jpg"},
    {name:"Ù„ÙˆÙƒØ³ØªØ±Ø§", price: Math.floor(Math.random()*500)+100, img:"images/11.jpg"},
    {name:"ÙÙŠØ±Ùˆ ØªØ§ÙŠÙ…", price: Math.floor(Math.random()*500)+100, img:"images/12.jpg"},
    {name:"Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ… ÙƒÙˆØªØ´", price: Math.floor(Math.random()*500)+100, img:"images/13.jpg"},
    {name:"Ø£ÙˆØ±ÙŠØ¬ÙŠÙ†Ø§Ù„", price: Math.floor(Math.random()*500)+100, img:"images/14.jpg"},
    {name:"Ø³ÙŠÙ„ÙØ± ÙˆÙŠÙ", price: Math.floor(Math.random()*500)+100, img:"images/15.jpg"},
    {name:"ØºÙˆÙ„Ø¯Ù† Ù‡ÙˆØ±Ø§ÙŠØ²Ù†", price: Math.floor(Math.random()*500)+100, img:"images/16.jpg"},
    {name:"Ù…ÙŠØ³ØªÙŠÙƒ ØªØ§ÙŠÙ…", price: Math.floor(Math.random()*500)+100, img:"images/17.jpg"},
    {name:"Ø¥Ù„ÙŠØª ÙƒØ±Ø§ÙˆÙ†", price: Math.floor(Math.random()*500)+100, img:"images/18.jpg"},
    {name:"Ø³ÙƒØ§ÙŠ Ù„ÙŠÙ†", price: Math.floor(Math.random()*500)+100, img:"images/19.jpg"},
    {name:"ÙÙŠÙ†ØªØ§Ø¬ Ø³ØªØ§ÙŠÙ„", price: Math.floor(Math.random()*500)+100, img:"images/20.jpg"}
];

let cart = [];

function renderProducts(){
    const div = document.getElementById('products');
    div.innerHTML = '';
    products.forEach((p,i)=>{
        const prod = document.createElement('div');
        prod.className='product';
        prod.innerHTML = `<img src="${p.img}" alt="${p.name}"><h3>${p.name}</h3><p>${p.price} Ø¬</p><button onclick="addToCart(${i})">Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©</button>`;
        div.appendChild(prod);
    });
}

function addToCart(index){
    cart.push(products[index]);
    renderCart();
}

function renderCart(){
    const cartDiv = document.getElementById('cartItems');
    const countSpan = document.getElementById('cartCount');
    countSpan.innerText = cart.length;
    if(cart.length===0){ cartDiv.innerHTML='Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©'; return; }
    cartDiv.innerHTML='';
    cart.forEach((p,i)=>{
        const item = document.createElement('div');
        item.innerHTML=`${p.name} - ${p.price} Ø¬ <button onclick="removeFromCart(${i})">Ø­Ø°Ù</button>`;
        cartDiv.appendChild(item);
    });
}

function removeFromCart(index){ cart.splice(index,1); renderCart(); }

function toggleCart(){
    const sidebar = document.getElementById('cartSidebar');
    sidebar.classList.toggle('open');
}

function showCheckout(){
    document.getElementById('checkoutForm').style.display='block';
}

// Checkout
document.getElementById('checkoutBtn').addEventListener('click', function(){
    if(cart.length===0){ alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©!"); return; }
    const fullName=document.getElementById('fullName').value.trim();
    const email=document.getElementById('email').value.trim();
    const phone=document.getElementById('phone').value.trim();
    const address=document.getElementById('address').value.trim();
    const paymentMethod=document.getElementById('paymentMethod').value;
    if(!fullName||!email||!phone||!address||!paymentMethod){ alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§Ù…Ù„Ø£ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„!"); return; }

    alert(`ØªÙ…Øª Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡ Ø¨Ù†Ø¬Ø§Ø­!`);

    cart=[]; renderCart();
    toggleCart();

    const reviewsSection = document.getElementById('reviews');
    reviewsSection.style.display='block';
    reviewsSection.scrollIntoView({behavior:"smooth"});

    document.getElementById('userReview').style.display='block';
});

// ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
document.getElementById('submitReviewBtn').addEventListener('click', function(){
    const stars=document.getElementById('starRating').value;
    const comment=document.getElementById('userComment').value.trim();
    if(!comment){ alert("Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ùƒ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„!"); return; }
    const reviewsSection=document.getElementById('reviews');
    const newReview=document.createElement('div');
    newReview.className='review';
    newReview.innerHTML=`<strong>${account.name}:</strong> ${'â­'.repeat(stars)} "<em>${comment}</em>"`;
    reviewsSection.appendChild(newReview);

    document.getElementById('starRating').value=5;
    document.getElementById('userComment').value='';
    alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ ØªÙ‚ÙŠÙŠÙ…Ùƒ Ø¨Ù†Ø¬Ø§Ø­! âœ…");
});

function logout(){ localStorage.removeItem('loggedIn'); window.location.href="index.html"; }

renderProducts();
renderCart();
</script>

</body>
</html>

